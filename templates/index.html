{%- extends "base.html" -%}
{% block title %}Index{% endblock %}

{% block content -%}
  {% if 'username' in session -%}
    <h1>Active Games</h1>
    <table>
      <thead><tr>
        <th>ID</th>
        <th>Started</th>
        <th>Last Move</th>
        <th>Players</th>
      </tr></thead>
      {% for game in games -%}
      <tr>
        <td><a href="{{ url_for('view_game', game_id=game.id_) }}">{{ game.id_ }}</a></td>
        <td>{{ game.started.strftime(config.TS_FORMAT) }}</td>
        <td>{{ game.last_move.strftime(config.TS_FORMAT) }}</td>
        <td>{{ game.players|map(attribute='name')|join(', ') }}
      </tr>
      {%- endfor %}
    </table>
    <h1>Pending Games</h1>
    <table>
      <thead><tr>
        <th>ID</th>
        <th>Created</th>
        <th>Players</th>
      </tr></thead>
      {% for game in pending_games -%}
      <tr>
        <td><a href="{{ url_for('view_pending_game', game_id=game.id_) }}">{{ game.id_ }}</a></td>
        <td>{{ game.created.strftime(config.TS_FORMAT) }}</td>
        <td>{{ game.players|map(attribute='name')|join(', ') }}
      </tr>
      {%- endfor %}
    </table>
  {%- endif %}
{%- endblock %}
